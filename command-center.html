<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Procurithm — Command Center</title>
  <meta name="description" content="Procurithm Command Center: contract triage, risk signals, and notes export for procurement negotiations." />
  <style>
    :root {
      --bg: #0b0f19;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --border: rgba(255,255,255,.14);
      --accent: #7c3aed;
      --good: #22c55e;
      --warn: #f59e0b;
      --bad: #ef4444;
      --radius: 18px;
      --shadow: 0 14px 40px rgba(0,0,0,.45);
      --max: 1100px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(900px 450px at 10% 5%, rgba(124,58,237,.30), transparent 60%),
        radial-gradient(900px 450px at 85% 0%, rgba(34,197,94,.22), transparent 60%),
        var(--bg);
      line-height: 1.45;
    }
    a { color: inherit; text-decoration: none; }
    .wrap { max-width: var(--max); margin: 0 auto; padding: 28px 18px 70px; }
    header {
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; padding-bottom: 14px;
    }
    .brand { display:flex; align-items:center; gap: 12px; }
    .logo {
      width: 38px; height: 38px; border-radius: 12px;
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(34,197,94,.75));
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      display:grid; place-items:center;
      border: 1px solid rgba(255,255,255,.18);
    }
    .logo span { font-weight: 900; letter-spacing: .4px; }
    h1 { margin: 0; font-size: 16px; letter-spacing:.2px; }
    .sub { margin: 0; font-size: 12px; color: var(--muted); }
    .nav { display:flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .pill {
      display:inline-flex; align-items:center; gap: 8px;
      padding: 10px 12px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      font-size: 13px; color: var(--muted);
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .pill:hover { transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.22); color: var(--text); }
    .grid { margin-top: 14px; display:grid; grid-template-columns: repeat(12, 1fr); gap: 14px; }
    .card {
      border: 1px solid rgba(255,255,255,.14);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .hero {
      grid-column: 1 / -1;
      padding: 18px 16px;
      background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      display:flex; gap: 12px; align-items: flex-start; justify-content: space-between; flex-wrap: wrap;
    }
    .hero h2 { margin: 0; font-size: 20px; }
    .hero p { margin: 6px 0 0; color: var(--muted); font-size: 13px; max-width: 88ch; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center; gap: 10px;
      padding: 11px 14px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 800;
      font-size: 13px;
      cursor: pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select: none;
    }
    .btn:hover { transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.28); }
    .btn.primary { background: rgba(124,58,237,.25); border-color: rgba(124,58,237,.35); }
    .btn.warn { background: rgba(245,158,11,.18); border-color: rgba(245,158,11,.32); }
    .btn.good { background: rgba(34,197,94,.18); border-color: rgba(34,197,94,.32); }
    .col4 { grid-column: span 4; }
    .col8 { grid-column: span 8; }
    .col12 { grid-column: 1 / -1; }
    @media (max-width: 980px) { .col8, .col4 { grid-column: span 12; } }
    .pad { padding: 16px 16px; }
    h3 { margin: 0 0 10px; font-size: 16px; }
    .muted { color: var(--muted); }
    .section-note { margin: -4px 0 12px; font-size: 12px; color: var(--muted); }
    .risk-row {
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      padding: 12px 12px;
      margin: 10px 0;
    }
    .risk-row .left { display:flex; flex-direction:column; gap: 4px; }
    .risk-row .title { font-weight: 800; }
    .risk-row .desc { font-size: 12px; color: var(--muted); }
    .radio { display:flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end; }
    .opt {
      display:inline-flex; align-items:center; gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.78);
      font-size: 12px;
      cursor: pointer;
      user-select: none;
      transition: transform .10s ease, border-color .10s ease, background .10s ease;
    }
    .opt:hover { transform: translateY(-1px); border-color: rgba(255,255,255,.24); background: rgba(255,255,255,.08); }
    .opt input { display:none; }
    .opt[data-level="low"].active { border-color: rgba(34,197,94,.60); background: rgba(34,197,94,.12); color: rgba(255,255,255,.92); }
    .opt[data-level="med"].active { border-color: rgba(245,158,11,.70); background: rgba(245,158,11,.12); color: rgba(255,255,255,.92); }
    .opt[data-level="high"].active { border-color: rgba(239,68,68,.70); background: rgba(239,68,68,.12); color: rgba(255,255,255,.92); }
    textarea {
      width: 100%;
      min-height: 140px;
      resize: vertical;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.92);
      outline: none;
      font-size: 13px;
      line-height: 1.4;
    }
    textarea:focus { border-color: rgba(124,58,237,.55); box-shadow: 0 0 0 4px rgba(124,58,237,.18); }
    .score {
      display:flex; align-items:center; justify-content:space-between; gap: 12px;
      margin-top: 10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .badge {
      display:inline-flex; align-items:center; justify-content:center;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .badge.low { border-color: rgba(34,197,94,.55); background: rgba(34,197,94,.12); }
    .badge.med { border-color: rgba(245,158,11,.60); background: rgba(245,158,11,.12); }
    .badge.high { border-color: rgba(239,68,68,.60); background: rgba(239,68,68,.12); }
    .rec {
      margin-top: 10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.86);
      font-size: 13px;
    }
    .rec ul { margin: 8px 0 0; padding-left: 18px; color: var(--muted); }
    .legal {
      margin-top: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      padding: 12px 12px;
      color: rgba(255,255,255,.70);
      font-size: 12px;
    }
    .toast {
      position: fixed;
      bottom: 16px; left: 50%;
      transform: translateX(-50%);
      max-width: 92vw;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(15,23,42,.85);
      color: rgba(255,255,255,.92);
      box-shadow: 0 16px 50px rgba(0,0,0,.50);
      font-size: 13px;
      display: none;
      z-index: 50;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>P</span></div>
        <div>
          <h1>Procurithm — Command Center</h1>
          <p class="sub">Contract triage • risk signals • notes export • updated 22 Dec 2025</p>
        </div>
      </div>
      <nav class="nav">
        <a class="pill" href="index.html">← Back to Landing</a>
        <a class="pill" href="#signals">Risk signals</a>
        <a class="pill" href="#notes">Notes</a>
        <a class="pill" href="#export">Export</a>
      </nav>
    </header>

    <section class="grid">
      <div class="card hero">
        <div>
          <h2>Fast triage for vendor agreements</h2>
          <p>
            Click the risk signal levels. The summary updates automatically and suggests your next playbook focus.
            Use <span class="muted">Reset/Clear</span> if you clicked something by mistake.
          </p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn primary" id="btn-save">Save locally</button>
          <button class="btn warn" id="btn-reset">Reset / Clear</button>
        </div>
      </div>

      <section class="card pad col8" id="signals">
        <h3>Risk signals</h3>
        <div class="section-note">Pick one level per row. You can leave items unset if they’re not relevant.</div>

        <div class="risk-row" id="renewals">
          <div class="left">
            <div class="title">Renewal / auto‑extension pressure</div>
            <div class="desc">Short notice windows, silent renewals, or unclear termination timing.</div>
          </div>
          <div class="radio" data-group="renewal">
            <label class="opt" data-level="low"><input type="radio" name="renewal" value="low">Low</label>
            <label class="opt" data-level="med"><input type="radio" name="renewal" value="med">Medium</label>
            <label class="opt" data-level="high"><input type="radio" name="renewal" value="high">High</label>
          </div>
        </div>

        <div class="risk-row" id="audit">
          <div class="left">
            <div class="title">Audit rights too broad</div>
            <div class="desc">Scope/frequency unclear, on-site access, weak confidentiality, vendor-defined auditors.</div>
          </div>
          <div class="radio" data-group="audit">
            <label class="opt" data-level="low"><input type="radio" name="audit" value="low">Low</label>
            <label class="opt" data-level="med"><input type="radio" name="audit" value="med">Medium</label>
            <label class="opt" data-level="high"><input type="radio" name="audit" value="high">High</label>
          </div>
        </div>

        <div class="risk-row">
          <div class="left">
            <div class="title">Pricing / fee changes</div>
            <div class="desc">Unilateral increases, vague indexation, pass-throughs without caps.</div>
          </div>
          <div class="radio" data-group="pricing">
            <label class="opt" data-level="low"><input type="radio" name="pricing" value="low">Low</label>
            <label class="opt" data-level="med"><input type="radio" name="pricing" value="med">Medium</label>
            <label class="opt" data-level="high"><input type="radio" name="pricing" value="high">High</label>
          </div>
        </div>

        <div class="risk-row">
          <div class="left">
            <div class="title">Termination &amp; exit friction</div>
            <div class="desc">Long cure periods, termination fees, data return fees, or “evergreen” obligations.</div>
          </div>
          <div class="radio" data-group="termination">
            <label class="opt" data-level="low"><input type="radio" name="termination" value="low">Low</label>
            <label class="opt" data-level="med"><input type="radio" name="termination" value="med">Medium</label>
            <label class="opt" data-level="high"><input type="radio" name="termination" value="high">High</label>
          </div>
        </div>

        <div class="risk-row">
          <div class="left">
            <div class="title">Liability imbalance</div>
            <div class="desc">Low caps, broad exclusions, weak indemnities, or no SLA credits.</div>
          </div>
          <div class="radio" data-group="liability">
            <label class="opt" data-level="low"><input type="radio" name="liability" value="low">Low</label>
            <label class="opt" data-level="med"><input type="radio" name="liability" value="med">Medium</label>
            <label class="opt" data-level="high"><input type="radio" name="liability" value="high">High</label>
          </div>
        </div>

        <div class="score" aria-live="polite">
          <div>
            <div class="muted" style="font-size:12px">Overall risk</div>
            <b id="scoreText">Unrated</b>
          </div>
          <div class="badge" id="scoreBadge">—</div>
        </div>

        <div class="rec" id="recommendation">
          <b>Suggested next focus:</b>
          <div class="muted" style="margin-top:6px">Select some signals to see recommendations.</div>
        </div>
      </section>

      <section class="card pad col4" id="notes">
        <h3>Notes (for approvals)</h3>
        <div class="section-note">Write quick bullets. Use Export to copy a clean summary into email / Jira / Slack.</div>
        <textarea id="notesBox" placeholder="Example:
- Vendor insisted on 30-day auto-renew with 10-day notice window → ask for 90 days notice + no auto-renew.
- Audit clause allows on-site access without limits → restrict scope + 1/year + confidentiality + vendor pays if no finding.
- Pricing increase clause is unilateral → require cap + mutual consent."></textarea>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px" id="export">
          <button class="btn good" id="btn-copy">Copy Summary</button>
          <button class="btn" id="btn-download">Download .txt</button>
        </div>

        <div class="legal">
          <strong>Distribution prohibited.</strong> Licensed for purchaser’s internal business use only. Do not redistribute, resell, sublicense, share publicly, or post any portion online or in shared drives accessible by non‑licensed users. No legal advice.
        </div>
      </section>

      <section class="card pad col12">
        <h3>Quick mapping to playbooks</h3>
        <p class="muted" style="margin:0">
          High renewal pressure → use <b>Renewal Traps &amp; Auto‑Extensions</b>. Broad audit rights → use <b>Controlling Vendor Audit Rights</b>.
          If multiple High signals show up, treat as a renegotiation moment (or require exec approval).
        </p>
      </section>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const STORAGE_KEY = "procurithm_command_center_v1";

    const scoreBadge = document.getElementById("scoreBadge");
    const scoreText = document.getElementById("scoreText");
    const rec = document.getElementById("recommendation");
    const notesBox = document.getElementById("notesBox");
    const toast = document.getElementById("toast");

    function showToast(msg) {
      toast.textContent = msg;
      toast.style.display = "block";
      clearTimeout(window.__toastT);
      window.__toastT = setTimeout(() => toast.style.display = "none", 1800);
    }

    function syncLabelStates() {
      document.querySelectorAll(".radio").forEach(group => {
        const name = group.dataset.group;
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        group.querySelectorAll(".opt").forEach(opt => {
          const input = opt.querySelector("input");
          opt.classList.toggle("active", !!checked && input.value === checked.value);
        });
      });
    }

    function computeSummary() {
      const selected = Array.from(document.querySelectorAll("input[type=radio]:checked")).map(i => i.value);
      const maxLevel = selected.includes("high") ? "high" : (selected.includes("med") ? "med" : (selected.includes("low") ? "low" : null));

      if (!maxLevel) {
        scoreText.textContent = "Unrated";
        scoreBadge.textContent = "—";
        scoreBadge.className = "badge";
        rec.innerHTML = "<b>Suggested next focus:</b><div class='muted' style='margin-top:6px'>Select some signals to see recommendations.</div>";
        return;
      }

      const badgeClass = maxLevel === "high" ? "high" : (maxLevel === "med" ? "med" : "low");
      scoreBadge.className = "badge " + badgeClass;
      scoreBadge.textContent = maxLevel === "high" ? "HIGH" : (maxLevel === "med" ? "MED" : "LOW");
      scoreText.textContent = maxLevel === "high" ? "High risk" : (maxLevel === "med" ? "Medium risk" : "Low risk");

      const renewal = (document.querySelector('input[name="renewal"]:checked') || {}).value;
      const audit = (document.querySelector('input[name="audit"]:checked') || {}).value;

      const bullets = [];
      if (renewal in {high:1, med:1}) bullets.push("Renewal terms: tighten notice window, remove auto‑renew, add clear termination mechanics.");
      if (audit in {high:1, med:1}) bullets.push("Audit rights: limit scope & frequency, add confidentiality and cost boundaries.");
      const highs = selected.filter(v => v === "high").length;
      if (highs >= 2) bullets.push("Multiple high-risk items: require exec approval or re-open commercials (price, term, exit).");
      if (bullets.length === 0) bullets.push("Proceed with standard redline hygiene and save the summary for approvals.");

      rec.innerHTML = "<b>Suggested next focus:</b><ul>" + bullets.map(b => "<li>" + b + "</li>").join("") + "</ul>";
    }

    function getState() {
      const state = { signals: {}, notes: notesBox.value || "" };
      document.querySelectorAll(".radio").forEach(group => {
        const name = group.dataset.group;
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        state.signals[name] = checked ? checked.value : null;
      });
      return state;
    }

    function applyState(state) {
      if (!state) return;
      notesBox.value = state.notes || "";
      Object.entries(state.signals || {}).forEach(([name, val]) => {
        if (!val) return;
        const input = document.querySelector(`input[name="${name}"][value="${val}"]`);
        if (input) input.checked = true;
      });
      syncLabelStates();
      computeSummary();
    }

    function saveLocal() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(getState()));
      showToast("Saved locally");
    }

    function resetAll() {
      document.querySelectorAll("input[type=radio]").forEach(i => i.checked = false);
      notesBox.value = "";
      localStorage.removeItem(STORAGE_KEY);
      syncLabelStates();
      computeSummary();
      showToast("Cleared");
    }

    function buildExportText() {
      const state = getState();
      const lines = [];
      lines.push("Procurithm — Command Center Summary");
      lines.push("Updated: 22 Dec 2025");
      lines.push("");
      lines.push("Risk signals:");
      Object.entries(state.signals).forEach(([k, v]) => {
        lines.push(`- ${k}: ${v || "unset"}`);
      });
      lines.push("");
      lines.push("Notes:");
      lines.push(state.notes ? state.notes.trim() : "(none)");
      lines.push("");
      lines.push("Distribution prohibited. Internal business use only. No legal advice.");
      return lines.join("\n");
    }

    function copySummary() {
      const text = buildExportText();
      navigator.clipboard.writeText(text).then(() => showToast("Copied")).catch(() => {
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        showToast("Copied");
      });
    }

    function downloadTxt() {
      const blob = new Blob([buildExportText()], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "procurithm_command_center_summary.txt";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      showToast("Downloaded");
    }

    document.querySelectorAll(".opt").forEach(label => {
      label.addEventListener("click", () => {
        label.querySelector("input").checked = true;
        syncLabelStates();
        computeSummary();
      });
    });

    document.getElementById("btn-save").addEventListener("click", saveLocal);
    document.getElementById("btn-reset").addEventListener("click", resetAll);
    document.getElementById("btn-copy").addEventListener("click", copySummary);
    document.getElementById("btn-download").addEventListener("click", downloadTxt);

    try {
      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "null");
      applyState(saved);
    } catch (e) {}

    syncLabelStates();
    computeSummary();
  </script>
</body>
</html>
